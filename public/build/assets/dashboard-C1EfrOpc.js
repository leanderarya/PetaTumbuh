import{r as o,j as e,L as f}from"./app-DRVLmyHe.js";import{A as b}from"./app-layout-BSVJ06He.js";import{L as m}from"./leaflet-Dzw85hjy.js";import{C as j}from"./index-DJ-do_WD.js";import{c as x}from"./createLucideIcon-CpNwZpJL.js";import{H as v}from"./x-B4oAjYhm.js";/* empty css            */import"./button-TMOOgMF0.js";import"./index-DYzaKtyk.js";import"./index-DAI_Teyv.js";import"./app-logo-icon-C1eEoTzD.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]],N=x("Baby",y);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],k=x("ChartColumn",w);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]],p=x("HeartPulse",A);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],S=x("MapPin",M);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],z=x("User",_),P=new m.Icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),g=["from-blue-200 to-blue-100","from-pink-100 to-pink-50","from-green-100 to-green-50","from-yellow-100 to-yellow-50","from-cyan-100 to-cyan-50","from-violet-100 to-violet-50"],u=({icon:s,title:a,value:r,unit:i})=>e.jsxs("div",{className:"flex items-center rounded-xl bg-white p-4 shadow-lg",children:[e.jsx("div",{className:"mr-4 rounded-full bg-blue-100 p-3",children:e.jsx(s,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:a}),e.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[r," ",e.jsx("span",{className:"text-base font-normal",children:i})]})]})]}),I=o.memo(({stat:s,isInView:a,idx:r})=>e.jsxs("div",{className:`rounded-xl bg-gradient-to-br ${g[r%g.length]} border-2 border-white p-5 text-center shadow-lg transition-transform duration-300 hover:scale-105`,children:[e.jsxs("div",{className:"mb-2 flex items-center justify-center gap-1",children:[e.jsx(z,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"font-semibold text-blue-800",children:s.desa})]}),e.jsx("div",{className:"animate-fade-in text-4xl font-extrabold text-blue-800 drop-shadow-md",children:a?e.jsx(j,{start:0,end:s.jumlah_anak,duration:2,separator:","}):"0"}),e.jsx("p",{className:"mt-2 text-xs text-gray-700",children:"Anak terdata"})]})),C=({center:s,zoom:a,markers:r})=>{const i=o.useRef(null),n=o.useRef(null);return o.useEffect(()=>{if(i.current&&!n.current){const t=m.map(i.current).setView(s,a);n.current=t,m.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri"}).addTo(t)}n.current&&Array.isArray(r)&&(n.current.eachLayer(t=>{var c;t instanceof m.Marker&&((c=n.current)==null||c.removeLayer(t))}),r.forEach(t=>{if(t.latitude&&t.longitude){const c=[parseFloat(t.latitude),parseFloat(t.longitude)];m.marker(c,{icon:P}).addTo(n.current).bindPopup(`<b>${t.nama}</b><br>Status Gizi: ${t.status_gizi}`)}}))},[s,a,r]),e.jsx("div",{ref:i,className:"z-0 h-full w-full rounded-b-xl"})},R=[{title:"Dashboard",href:"/dashboard"}];function F({anakData:s,stats:a,dusunStats:r}){const[i,n]=o.useState(!1),t=o.useRef(null),c=(s==null?void 0:s.filter(l=>l.status_gizi==="Bawah Garis Merah"||l.status_gizi==="Kurang"))??[];return o.useEffect(()=>{const l=new IntersectionObserver(([h])=>{h.isIntersecting&&(n(!0),l.unobserve(h.target))},{threshold:.1}),d=t.current;return d&&l.observe(d),()=>{d&&l.unobserve(d)}},[]),e.jsxs(b,{breadcrumbs:R,children:[e.jsx(f,{title:"Dashboard"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-2 md:p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsx(u,{icon:N,title:"Total Anak Terdata",value:a.total,unit:"Anak"}),e.jsx(u,{icon:k,title:"Rata-rata Usia",value:a.avg_usia,unit:"Bulan"}),e.jsx(u,{icon:p,title:"Kasus Gizi Kurang/Stunting",value:a.stunting,unit:"Kasus"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-5",children:[e.jsxs("div",{className:"relative flex min-h-[240px] flex-col justify-between overflow-hidden rounded-xl bg-cover bg-center p-5 text-white shadow-2xl sm:p-8 lg:col-span-2",style:{backgroundImage:"url('/storage/pake.png')"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-blue-900/60 to-transparent"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"mb-4 w-fit rounded-full bg-white/20 p-3 backdrop-blur-sm",children:e.jsx(p,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold md:text-3xl",children:"Selamat Datang di Dashboard Peta Tumbuh"})]}),e.jsx("p",{className:"relative z-10 mt-2 text-justify text-sm leading-relaxed opacity-90 md:text-base",children:"Halaman ini memberikan ringkasan visual dari data persebaran anak di wilayah Anda. Gunakan peta di samping untuk melihat lokasi setiap anak yang terdata."})]}),e.jsxs("div",{className:"flex h-[280px] flex-col rounded-xl bg-white shadow-xl md:h-[360px] lg:col-span-3 lg:h-auto",children:[e.jsx("div",{className:"border-b p-4 md:p-6",children:e.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold text-gray-800 md:text-2xl",children:[e.jsx(S,{className:"text-blue-600"}),"Peta Persebaran Anak"]})}),e.jsx("div",{className:"flex-grow p-2 md:p-6",children:s&&s.length>0?e.jsx("div",{className:"h-[220px] w-full overflow-hidden rounded-b-xl md:h-[280px] lg:h-[380px]",children:e.jsx(C,{center:[-7.079495,111.194213],zoom:15,markers:c})}):e.jsx("div",{className:"flex h-full w-full items-center justify-center rounded-lg bg-gray-100",children:e.jsx("p",{className:"text-center text-gray-500",children:"Data anak tidak tersedia."})})})]})]}),e.jsxs("div",{ref:t,className:"rounded-xl bg-white p-4 shadow-xl md:p-8",children:[e.jsx("h2",{className:"mb-4 text-center text-xl font-bold text-gray-800 md:mb-6 md:text-2xl",children:"Jumlah Anak Terdata per Dusun"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-6",children:r.map((l,d)=>e.jsx(I,{stat:l,isInView:i,idx:d},l.desa))})]}),e.jsx("footer",{className:"mt-auto border-t bg-white px-4 pt-8 pb-4 text-center text-sm text-gray-500",children:e.jsxs("div",{className:"mx-auto flex max-w-3xl flex-col items-center gap-2",children:[e.jsx("img",{src:"/storage/logo.png",alt:"Logo P3SA",className:"mb-1 h-9 w-9 object-contain"}),e.jsx("div",{className:"font-semibold text-gray-700",children:"P3SA Kalangdosari"}),e.jsx("div",{className:"mb-2 text-xs text-gray-400",children:"Portal Pencegahan & Penanganan Stunting Anak"}),e.jsx("p",{className:"mt-3 text-xs text-gray-400",children:"Â© 2025 P3SA Kalangdosari. Hak Cipta Dilindungi."}),e.jsxs("div",{className:"mt-4 flex items-center justify-center text-xs text-gray-500",children:[e.jsx("span",{className:"mr-2",children:"Made with"}),e.jsx(v,{className:"text-red-500"}),e.jsx("span",{className:"ml-2",children:"by KKN-T 116 Universitas Diponegoro"})]})]})})]})]})}export{F as default};
